# BITCOIN 100서
- 개인 대 개인 (P2P) 전자화폐 송금 시스템
- 사토시 나카모토가 제안
    - 누구인지 밝혀지지 않았지만 개발자이기 전에 경제학으로도 지식을 가지고 있었을 것으로 추정

### P2P 거래
- 개인 대 개인 버전 전자화폐는 금융기관을 거치지 않고 한쪽에서 다른 한쪽으로 직접 전달되는 온라인 결제를 실현
- 우리가 사용하고 있는 중앙집권 금융 시스템은 금융 기관을 통해서만 전달 가능

### P2P 거래 문제점 해결
- 이중지불을 막기 위해 신뢰할 수 있는 제 3자가 필요
- 원래는 중앙화된 기관이 제 3자의 역할 -> 블록에 타임스탬프(생성시간) 기록, 거래 내용을 해싱(암호화)해서 해시 기반 작업증명을 연결한 사슬로 만듦, 작업증명을 재 수행하지 않으면 변경할 수 없음
- 블록체인 == 블록들의 연결
- 데이터 위변조 없이 안전한 데이터라는 것을 증명 가능

### 가장 긴 사슬 (longest chain rule)
- 서로의 장부가 맞는지 서로가 확인을 하는데, 가장 긴 체인을 선택해서 하나의 체인을 유지함 (가장 긴 체인이 정답)

### 비트코인이 생긴 이유
- 사카시 나카모토는 2008년 금융위기를 보면서 중앙 기관이 신뢰하기 어렵다고 판단, 탈중앙화 화폐를 제안

### 블록체인 4대 요소 기술
1. 블록과 트랜젝션
    - 트랜젝션은 사용자의 송금 내역, 송금 내역들을 하나의 블록에 포함시켜야 안정성을 보장할 수 있음
    - POW, POS, POA 작업 증명을 통해 블록 연결
2. 분산 네트워크
    - 사용자들이 언제든 네트워크에 참가하거나 나갈 수 있음
3. 암호화
    - 거래가 위변조되지 않은 것을 증명
4. 합의 알고리즘
    - 분산 네트워크에서 중앙화된 기관이 없기 때문에 하나의 체인(longest chain)을 구성하는 것이 매우 중요
    - 분산화된 네트워크에서 모든 사용자들이 납득할 수 있는 하나의 거래 내역

### 블록의 구성
- 특정 정보를 담아놓은 객체
- 블록을 생성할 때 header, body를 나눠서 생성하는 것이 아니고 개념적으로만 명칭

#### header
- version 정보
- 이전 블록의 해시
- 블록의 해시
- body 내용을 해싱한 값 (머클 루트)
- 몇 번째인지 블록의 높이 (index)
- 블록 생성시간 (타임스탬프)
- 채굴의 난이도 (연산한 값의 결과가 00000 5개 이상)
    - 블록의 생성시간을 보고 너무 빠르면 난이도를 높임
- 논스 : 블록을 채굴하기 위해 몇 번 연산작업을 반복했는지

#### body
- 블록에 저장할 데이터 (트랜젝션 내용)

### -----------------------------------------------

### 작업 증명 POW (proof of work)
- 비트코인의 합의 알고리즘 (최초의 합의 알고리즘)
- 연산 작업을 기반으로 합의
- 새로운 블록을 추가하려면 난이도에 따른 값을 찾는 반복작업을 해야하는데, 작업의 완료를 증명하는 방식
- 문제점 : 높은 에너지 소비, 환경 오염

### 지분 증명 POS (proof of stake)
- 보상을 받기위해 암호화 토큰을 스테이킹(예치), 예치량에 비례한 확률로 채굴 권한을 줌
- 문제점 : 비잔틴 결함이 생길 수 있음 (팀을 구성해서 네트워크를 방해)
- 장점 : 환경 친화적, 전력 소비 줄임

### 권위 증명 POA (proof of athority)
- 권위 있는 기관에서 조건에 맞는 노드를 증명하여 이들 간의 합의를 이루는 방식
- ex. DBS(두나무 블록체인 서비스)
- 네트워크에 참여한 멤버들에게 운영 참여 권리 부여 -> 전원이 해당 권한을 위임하여 투표를 진행

### 블록체인의 거래정보 변경이 불가한 이유
- 블록의 머클루트에 이전 블록 해시가 포함
- 거래 위변조 -> 머클루트 변경됨 -> 블록 해시 변경됨 -> 사슬이 끊김 (짧아짐)
- 짧아진 사슬은 정답으로 판단하지 않음